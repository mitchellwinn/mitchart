<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MitchArt</title>
    <script type="module" src="https://unpkg.com/@splinetool/viewer@1.10.57/build/spline-viewer.js"></script>
    
    <!-- Try to load HS Yamazaki font (may need to be downloaded locally) -->
    <!-- <link href="path/to/HS-Yamazaki.css" rel="stylesheet"> -->
    <!-- Fallback fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@800,900&display=swap" rel="stylesheet">
    
    <!-- Custom animations and utilities -->
    <link rel="stylesheet" href="styles/animations.css">
    <style>
        /* Font face declaration for Jalnan2 */
        @font-face {
            font-family: 'Jalnan2';
            src: url('fonts/Jalnan2/Jalnan2.otf') format('opentype'),
                 url('fonts/Jalnan2/Jalnan2TTF.ttf') format('truetype');
            font-weight: normal;
            font-display: swap;
        }
        
        /* Font face declaration for OkDanDan-Bold */
        @font-face {
            font-family: 'OkDanDan-Bold';
            src: url('fonts/OkDanDan-Bold.otf') format('opentype'),
                 url('fonts/OkDanDan-Bold.ttf') format('truetype');
            font-weight: bold;
            font-display: swap;
        }
        
        /* CSS Variables for easy tweaking */
        :root {
            /* Desktop values */
            --logo-width: 45vw;  /* Responsive width */
            --logo-height: 35vh;
            --logo-top: 0.5vh;  /* Based on vertical height */
            --logo-left: -8vw;  /* Much closer to left edge */

            /* Mobile breakpoint */
            --mobile-width: 768px;
        }

        /* Base styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            background: #fff; /* White background */
            overflow-x: hidden; /* Prevent horizontal scroll */
        }

        /* Viewer styles */
        spline-viewer {
            width: 100%;
            height: 100%;
            display: block;
            border: none;
        }
        
        /* Background Spline should allow scroll events to pass through */
        .background spline-viewer {
            pointer-events: none;
        }
        
        /* Re-enable pointer events on background hover for interactions */
        .background spline-viewer:hover {
            pointer-events: auto;
        }
        
        /* Gradient overlay to smooth transition from Spline scene to white */
        .gradient-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 30vh; /* Adjust height as needed */
            background: linear-gradient(to bottom, 
                rgba(255, 255, 255, 0) 0%,     /* Fully transparent at top */
                rgba(255, 255, 255, 0.3) 40%,  /* Slight white */
                rgba(255, 255, 255, 0.7) 70%,  /* More white */
                rgba(255, 255, 255, 1) 100%    /* Fully white at bottom */
            );
            pointer-events: none; /* Don't block interactions */
            z-index: 2;
        }

        /* Loading overlay */
        .loading {
            position: fixed;
            inset: 0;
            background: #fff;
            z-index: 100;
            transition: opacity 0.8s ease-out;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .loading.hidden {
            opacity: 0;
            pointer-events: none;
        }

        /* Loading text animation */
        .loading-text {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            font-size: 24px;
            font-weight: 300;
            letter-spacing: 2px;
            color: #000;
        }

        .loading-text .dots {
            display: inline-block;
            width: 30px;
            text-align: left;
        }

        @keyframes ellipsis {
            0% { content: ''; }
            25% { content: '.'; }
            50% { content: '..'; }
            75% { content: '...'; }
            100% { content: ''; }
        }

        .loading-text .dots::after {
            content: '';
            animation: ellipsis 2s infinite;
        }

        /* Desktop layout (default) */
        .background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 1;
        }

        /* Parallax container */
        .content {
            height: 100vh;
            overflow-y: auto;
            perspective: 1px;
            transform-style: preserve-3d;
        }
        
        /* Fast scrolling layer (logo) - normal speed */
        .fast-scroll-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 200vh; /* Tall enough to scroll */
            transform: translateZ(0);
            z-index: 3;
        }
        
        /* Slow scrolling layer (background + text) - ~80% speed */
        .slow-scroll-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            transform: translateZ(-0.3px) scale(1.3);
            z-index: 1;
        }
        
        /* Gallery text positioned lower in gradient */
        .gallery-text {
            position: absolute;
            top: 800px; /* Position from top */
            left: 0;
            width: 100%;
            text-align: center;
            color: #333;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            z-index: 3;
        }
        
        /* Coming Soon text positioned separately */
        .coming-soon-text {
            position: absolute;
            top: 1300px; /* Even lower - 500px below main text */
            left: 0;
            width: 100%;
            text-align: center;
            color: #333;
            z-index: 3;
        }
        
        /* Scroll-triggered animation */
        .text-scroll-animate {
            opacity: 0;
            transform: translateY(50px);
            animation: scrollFadeIn linear forwards; /* forwards keeps final state */
            animation-timeline: scroll();
            animation-range: 20vh 90vh; /* Much longer fade distance */
        }
        
        @keyframes scrollFadeIn {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Logo container - stays at top initially but scrolls with content */
        .logo-container {
            position: relative;
            height: 50vh; /* Give some initial height */
            z-index: 150;
        }

        .logo {
            position: absolute;
            top: var(--logo-top);
            left: var(--logo-left);  /* Use left positioning */
            width: var(--logo-width);
            height: var(--logo-height);
            z-index: 150;
            overflow: visible; /* Allow content to extend beyond container */
        }
        
        .logo spline-viewer {
            width: 100%;
            height: 100%;
            display: block;
            /* Spline-specific fixes for content clipping */
            transform-origin: center center;
            object-fit: contain;
        }

        /* Mobile layout */
        @media (max-width: 768px) {
            :root {
                /* Mobile values */
                --logo-width: 90vw;  /* Maximum width on mobile */
                --logo-height: 30vh;  /* Slightly more height */
                --logo-top: 2vh;
                --logo-left: 50%;    /* Center horizontally with transform */
            }

            .logo {
                transform: translateX(-50%); /* Center horizontally */
            }
            
            .logo spline-viewer {
                /* Scale down to fit better on mobile */
                transform: scale(0.8);
            }

            /* Add more mobile-specific styles here */
        }

        /* Tablet layout (optional) */
        @media (min-width: 769px) and (max-width: 1024px) {
            :root {
                /* Tablet values if needed */
                --logo-width: 55vw;  /* Increased from 45vw for more horizontal space */
                --logo-height: 30vh;
            }
            /* Add tablet-specific styles here */
        }
    </style>
</head>

<body>
    <div class="loading">
        <div class="loading-text">LOADING<span class="dots"></span></div>
    </div>

    <!-- Scrollable content container -->
    <div class="content">
        <!-- Slow scrolling layer (background + text) -->
        <div class="slow-scroll-layer">
            <div class="background">
                <spline-viewer 
                    url="https://prod.spline.design/7YycjGwsA6rW40mS/scene.splinecode" 
                    logo="false"
                    loading-anim="false"
                    mouse-controls="true"
                    touch-action="auto"
                    events-target="global">
                </spline-viewer>
                <div class="gradient-overlay"></div>
            </div>
            
            <!-- Text positioned in gradient area -->
            <div class="gallery-text">
                <h2 class="text-animate" style="font-size: 2rem; font-weight: 900; letter-spacing: 1px; font-family: 'Jalnan2', 'Arial Black', sans-serif;">Scroll to View Gallery</h2>
                <p class="text-animate" style="margin-top: 1rem; font-size: 1.1rem; font-family: 'OkDanDan-Bold', sans-serif;">2D · 3D · Games</p>
            </div>
            
            <!-- Coming Soon text positioned separately -->
            <div class="coming-soon-text">
                <h1 class="text-scroll-animate" style="font-size: 5rem; font-weight: 900; letter-spacing: 3px; font-family: 'Jalnan2', 'Arial Black', sans-serif;">COMING SOON</h1>
            </div>
        </div>
        
        <!-- Fast scrolling layer (logo) -->
        <div class="fast-scroll-layer">
            <div class="logo-container">
                <div class="logo" id="logo"></div>
            </div>
        </div>
    </div>

    <script>
        const loading = document.querySelector('.loading');
        const background = document.querySelector('.background spline-viewer');
        const logoDiv = document.getElementById('logo');

        // Create and start loading logo immediately
        const logoViewer = document.createElement('spline-viewer');
        logoViewer.url = 'https://prod.spline.design/12zIp9fiviXmrF90/scene.splinecode';
        
        // Set Spline viewer attributes
        logoViewer.setAttribute('loading-anim', 'false');
        logoViewer.setAttribute('logo', 'false');  // Hide "Built with Spline" watermark
        // Keep mouse tracking enabled by NOT disabling interactions
        
        logoDiv.appendChild(logoViewer);
        
        // Track loading states
        let backgroundLoaded = false;
        let logoLoaded = false;
        let loadingTimeout = null;
        
        // Function to check if we should hide the overlay
        const checkLoadingComplete = () => {
            // Only hide overlay when main background viewer is loaded
            if (backgroundLoaded) {
                console.log('Background loaded, fading out overlay...');
                loading.classList.add('hidden');
                
                // Clear the timeout since loading succeeded
                if (loadingTimeout) {
                    clearTimeout(loadingTimeout);
                }
                
                // Remove overlay from DOM after fade completes
                setTimeout(() => {
                    loading.remove();
                }, 800);
            }
        };
        
        // Fallback: Hide loading screen after 15 seconds even if not loaded
        loadingTimeout = setTimeout(() => {
            console.warn('Loading timeout - removing overlay anyway');
            loading.classList.add('hidden');
            setTimeout(() => {
                loading.remove();
            }, 800);
        }, 15000);
        
        // Listen for background load
        background.addEventListener('load-complete', () => {
            console.log('Background Spline viewer loaded');
            backgroundLoaded = true;
            checkLoadingComplete();
            
            // Start text animation 3 seconds after Spline loads
            setTimeout(() => {
                animateText();
            }, 3000);
        });
        
        // Fallback: Show text after 8 seconds regardless
        setTimeout(() => {
            const textElements = document.querySelectorAll('.text-animate');
            textElements.forEach(el => el.style.opacity = '1');
        }, 8000);
        
        // Listen for logo load (optional - just for logging)
        logoViewer.addEventListener('load-complete', () => {
            console.log('Logo Spline viewer loaded');
            logoLoaded = true;
        });
        
        // Error handling
        background.addEventListener('error', (e) => {
            console.error('Background Spline failed to load:', e);
            // Still hide loading screen on error
            loading.classList.add('hidden');
            setTimeout(() => {
                loading.remove();
            }, 800);
        });
        
        logoViewer.addEventListener('error', (e) => {
            console.error('Logo Spline failed to load:', e);
        });
        
        // Text animation function
        function animateText() {
            const textElements = document.querySelectorAll('.text-animate');
            
            textElements.forEach((element, elementIndex) => {
                const text = element.textContent;
                element.innerHTML = ''; // Clear existing content
                element.style.opacity = '1'; // Show the text container
                
                // Split text into letters and wrap each in a span
                text.split('').forEach((char, index) => {
                    const span = document.createElement('span');
                    span.classList.add('letter');
                    
                    if (char === ' ') {
                        span.classList.add('space');
                        span.innerHTML = '&nbsp;';
                    } else {
                        span.textContent = char;
                    }
                    
                    element.appendChild(span);
                });
                
                // Animate letters one by one over 1 second
                const letters = element.querySelectorAll('.letter');
                const delay = 1000 / letters.length; // Distribute over 1 second
                const elementDelay = elementIndex * 1000; // 1 second between elements
                
                letters.forEach((letter, index) => {
                    setTimeout(() => {
                        letter.classList.add('animate');
                    }, elementDelay + (index * delay));
                });
            });
        }
    </script>
</body>

</html>